<wxs src="./mark.wxs" module="tool"></wxs>

<view class="container">
  <block wx:if="{{hasAuthLocation}}">
    <view
      class="info_panel"
      animation="{{panelAniData}}"
    >
      <!-- 关闭面板的叉叉 -->
      <view class="cancel_cross" bind:tap="closePanel">
        <image
          src="./img/cross.png"
        />
      </view>

      <view class="header_img">
        <image
          src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcScgASmjdAgex5npjjcNA-4psF3fxQD7wZATFFqK_cJt5uhss87"
          class=""
        />
      </view>

      <form>

      </form>

    </view>

    <map
      id="map"
      class="map"
      show-location="{{true}}"
      bindmarkertap="tapmarker"
      markers="{{tool.createMarkers(markerData)}}"
      bindtap="tapmarker"

    >
      <!-- 回到当前定位 -->
      <cover-view
        class="locate_icon_wrap"
        bind:tap="toMyLocation"
      >
        <cover-image class="icon_size" src="./img/locate.png"/>
      </cover-view>

      <!-- 选择一个位置 -->
      <cover-view
        class="mark_icon_wrap"
        bind:tap="chooseLocation"
      >
        <cover-image class="icon_size" src="./img/flag.png"/>
      </cover-view>

    </map>


  </block>
  <block wx:if="{{!hasAuthLocation}}">
    <auth-page
      scope="userLocation"
      bind:getAuth="getAuth"
    />
  </block>

</view>
